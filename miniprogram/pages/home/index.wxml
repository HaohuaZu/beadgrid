<view class="home-page">
  <view class="top-nav brand-panel">
    <view class="main-nav-row">
      <scroll-view class="main-nav-scroll" scroll-x="true" show-scrollbar="false">
        <view class="main-nav-list">
          <block wx:for="{{mainNavs}}" wx:key="id">
            <view
              class="main-nav-item {{activeMainNav === item.id ? 'is-active' : ''}}"
              data-id="{{item.id}}"
              bindtap="handleMainNavTap"
            >
              {{item.label}}
            </view>
          </block>
        </view>
      </scroll-view>
      <view class="search-entry" bindtap="handleOpenSearchPanel">ğŸ”</view>
    </view>

    <view class="sort-row">
      <scroll-view class="sort-scroll" scroll-x="true" show-scrollbar="false">
        <view class="sort-list">
          <block wx:for="{{sortNavs}}" wx:key="id">
            <view
              class="sort-item {{activeSortNav === item.id ? 'is-active' : ''}}"
              data-id="{{item.id}}"
              bindtap="handleSortNavTap"
            >
              {{item.label}}
            </view>
          </block>
        </view>
      </scroll-view>
      <view class="sort-filter-icon" bindtap="handleOpenFilterHint">âš²</view>
    </view>

    <view class="tag-row">
      <scroll-view class="tag-scroll" scroll-x="true" show-scrollbar="false">
        <view class="tag-list">
          <block wx:for="{{activeTagOptions}}" wx:key="*this">
            <view
              class="tag-chip {{activeTag === item ? 'is-active' : ''}}"
              data-tag="{{item}}"
              bindtap="handleTagTap"
            >
              {{item}}
            </view>
          </block>
        </view>
      </scroll-view>
    </view>

    <view class="search-state" wx:if="{{searchKeyword}}">
      <text>å…³é”®è¯ï¼š{{searchKeyword}}</text>
      <text class="clear-link" bindtap="handleClearSearch">æ¸…é™¤</text>
    </view>
  </view>

  <view class="paper-grid">
    <block wx:for="{{displayPapers}}" wx:key="id">
      <view class="paper-card brand-panel">
        <view class="paper-cover tone-{{item.tone}}" data-id="{{item.id}}" bindtap="handlePreviewPaper">
          <text class="hot-tag" wx:if="{{item.hot}}">çƒ­é—¨</text>
          <view class="paper-pixel">
            <text class="paper-pixel-text">{{item.theme}}</text>
          </view>
        </view>

        <view class="paper-title">{{item.title}}</view>
        <view class="paper-author-row">
          <view class="author-avatar">{{item.avatarText}}</view>
          <text class="author-name">{{item.author}}</text>
          <text class="paper-size">{{item.size}}</text>
        </view>

        <view class="paper-meta-row">
          <text class="meta-tag">{{item.scene}}</text>
          <text class="meta-tag">{{item.difficulty}}</text>
        </view>

        <view class="paper-action-row">
          <view class="mini-btn metric-btn">â™¡ {{item.likes}}</view>
          <view class="mini-btn metric-btn">â˜† {{item.favorites}}</view>
          <view class="mini-btn export-btn" data-id="{{item.id}}" bindtap="handleExportPaper">â¬‡</view>
          <view class="mini-btn edit-btn" data-id="{{item.id}}" bindtap="handleEditPaper">âœ</view>
        </view>
      </view>
    </block>
  </view>

  <view class="empty-block" wx:if="{{!displayPapers.length}}">
    æš‚æ— åŒ¹é…å›¾çº¸ï¼Œè¯•è¯•åˆ‡æ¢ç­›é€‰æ¡ä»¶
  </view>

  <button class="generate-btn" bindtap="handleGenerate">AIç”Ÿæˆå›¾çº¸</button>

  <view class="overlay" wx:if="{{showSearchPanel}}" bindtap="handleCloseSearchPanel">
    <view class="search-modal brand-panel" catchtap="noop">
      <view class="search-modal-title">æœç´¢å›¾çº¸</view>
      <view class="search-modal-row">
        <input
          class="search-modal-input"
          placeholder="è¾“å…¥å›¾æ¡ˆã€åœºæ™¯æˆ–ä½œè€…"
          value="{{searchDraft}}"
          bindinput="handleSearchDraftInput"
          confirm-type="search"
          bindconfirm="handleSearchConfirm"
          focus
        />
        <view class="search-modal-btn" bindtap="handleSearchConfirm">æœç´¢</view>
      </view>
    </view>
  </view>
</view>
